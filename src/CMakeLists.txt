set(HEADER_FILES
        general/socket.h
        general/utils.h
        )

set(SOURCE_FILES
        general/socket.cpp
        general/json.hpp
        general/utils.cpp ../lib/udns/udns.h tasks/task.h tasks/http/server/reception_task.cpp tasks/http/server/reception_task.h general/state.h general/connection.cpp general/connection.h tasks/http/server/initialize_server_task.cpp tasks/http/server/initialize_server_task.h tasks/http/server/receive_requests_task.cpp tasks/http/server/receive_requests_task.h tasks/http/server/prune_connections_task.cpp tasks/http/server/prune_connections_task.h general/task_scheduler.cpp general/task_scheduler.h general/client_request.cpp general/client_request.h http/http_request_envelope.h tasks/http/server/process_http_requests_task.cpp tasks/http/server/process_http_requests_task.h tasks/http/server/initialize_client_requests_task.cpp tasks/http/server/initialize_client_requests_task.h tasks/http/server/load_requested_file_task.cpp tasks/http/server/load_requested_file_task.h tasks/http/server/finalize_client_requests_task.cpp tasks/http/server/finalize_client_requests_task.h http/http_response_envelope.h tasks/http/server/send_responses_task.cpp tasks/http/server/send_responses_task.h general/configuration.h tasks/load_configuration_task.cpp tasks/load_configuration_task.h general/url.cpp general/url.h tasks/http/client/send_http_requests_task.cpp tasks/http/client/send_http_requests_task.h http/http_request_carrier.cpp http/http_request_carrier.h tasks/http/client/initialize_http_request_connections_task.cpp tasks/http/client/initialize_http_request_connections_task.h tasks/http/client/receive_http_responses_task.cpp tasks/http/client/receive_http_responses_task.h actions/action.h controllers/controller.h controllers/direct_controller.cpp controllers/direct_controller.h receivers/receiver.h receivers/state_action_receiver.cpp receivers/state_action_receiver.h receivers/log_action_receiver.cpp receivers/log_action_receiver.h general/identifiable.h general/constants.h objects/general/http_message.cpp objects/general/http_message.h http/http_message_parser.cpp http/http_message_parser.h applications/http_client_app.cpp applications/http_client_app.h tasks/http/client/watch_http_response_task.cpp tasks/http/client/watch_http_response_task.h applications/docker_interface_app.cpp applications/docker_interface_app.h tasks/http/server/load_routing_data_task.cpp tasks/http/server/load_routing_data_task.h objects/general/route.cpp objects/general/route.h general/route_resolver.cpp general/route_resolver.h tasks/http/server/initialize_tls_server_socket_task.cpp tasks/http/server/initialize_tls_server_socket_task.h tasks/http/server/tls_reception_task.cpp tasks/http/server/tls_reception_task.h http/http_request_reader.cpp http/http_request_reader.h objects/general/access_profile.cpp objects/general/access_profile.h objects/general/user_account.h objects/general/authorization.h tasks/http/server/authorize_user_task.cpp tasks/http/server/authorize_user_task.h objects/general/web_socket_message.h tasks/web_sockets/send_web_socket_messages_task.cpp tasks/web_sockets/send_web_socket_messages_task.h general/web_socket_message_generator.cpp general/web_socket_message_generator.h tasks/web_sockets/recieve_web_socket_messages_task.cpp tasks/web_sockets/recieve_web_socket_messages_task.h general/web_socket_message_parser.cpp general/web_socket_message_parser.h objects/general/session.h objects/general/session_record.h objects/general/web_socket_message_frame.h objects/general/web_socket_message_header.h objects/mail/email.h tasks/mail/send_email_task.cpp tasks/mail/send_email_task.h tasks/mail/resolve_mail_connection_task.cpp tasks/mail/resolve_mail_connection_task.h tasks/mail/categorize_outbound_emails_task.cpp tasks/mail/categorize_outbound_emails_task.h objects/mail/dkim_signer.cpp objects/mail/dkim_signer.h objects/mail/email.cpp tasks/mail/initialize_smtp_server_task.cpp tasks/mail/initialize_smtp_server_task.h tasks/mail/smtp_reception_task.cpp tasks/mail/smtp_reception_task.h tasks/mail/receive_email_task.cpp tasks/mail/receive_email_task.h objects/mail/email_parser.cpp objects/mail/email_parser.h tasks/mail/store_email_task.cpp tasks/mail/store_email_task.h objects/mail/dkim_verifier.cpp objects/mail/dkim_verifier.h objects/mail/mail_identifier.cpp objects/mail/mail_identifier.h objects/general/authenicator.cpp objects/general/authenicator.h models/account_model.h models/email_model.h tasks/database/initialize_database_connection_task.cpp tasks/database/initialize_database_connection_task.h tasks/database/load_stored_data_task.cpp tasks/database/load_stored_data_task.h state/mail_state.cpp state/mail_state.h objects/mail/email_header.cpp objects/mail/email_header.h objects/mail/header_field.h objects/mail/email_address.cpp objects/mail/email_address.h objects/general/tag_field.h objects/mail/header_field.cpp objects/mail/email_body.h objects/mail/body_part.h objects/mail/body_part.cpp models/label_model.h models/receive_rule.h models/receive_rule_labels.h models/email_labels.h tasks/controlled_task.h)

include_directories(../lib/openssl/include/)
include_directories(../lib/jwt-cpp/include/)
include_directories(../lib/udns/)

find_library(MYSQLPP_LIB NAMES mysqlpp libmysqlpp mysql++ mysqlppclient PATHS /app/mysql++-3.3.0 /usr/lib /usr/lib64 /usr/local /usr/local/lib /usr/local/lib64 REQUIRED)

add_library(${CMAKE_PROJECT_NAME}_lib STATIC ${SOURCE_FILES} ${HEADER_FILES})

IF(UNIX AND NOT APPLE)
    target_link_libraries(${CMAKE_PROJECT_NAME}_lib mysqlclient)
ENDIF(UNIX AND NOT APPLE)

target_link_libraries(${CMAKE_PROJECT_NAME}_lib ${MYSQLPP_LIB} OpenSSL::SSL ${CMAKE_SOURCE_DIR}/lib/udns/libudns.a)
